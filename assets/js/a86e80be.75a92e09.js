"use strict";(self.webpackChunkmaptaskr_docs_copy=self.webpackChunkmaptaskr_docs_copy||[]).push([[7308],{4817:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>d});var o=n(74848),a=n(28453);const i={title:"D365 | Registerable Events | Global Function",sidebar_label:"Global Function"},s="Global Function",r={id:"dynamics-365/registerable-events/global-function",title:"D365 | Registerable Events | Global Function",description:"Maptaskr Core Loaded",source:"@site/docs/dynamics-365/registerable-events/global-function.md",sourceDirName:"dynamics-365/registerable-events",slug:"/dynamics-365/registerable-events/global-function",permalink:"/docs/dynamics-365/registerable-events/global-function",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"D365 | Registerable Events | Global Function",sidebar_label:"Global Function"},sidebar:"maptaskrSidebar",previous:{title:"Introduction",permalink:"/docs/dynamics-365/registerable-events/introduction"},next:{title:"Shape Drawing Events",permalink:"/docs/dynamics-365/registerable-events/shape-drawing-events"}},l={},d=[{value:"Maptaskr Core Loaded",id:"maptaskr-core-loaded",level:2},{value:"window.top.maptaskrReady(pageContext, controlId)",id:"windowtopmaptaskrreadypagecontext-controlid",level:3},{value:"Description",id:"description",level:4},{value:"Usage",id:"usage",level:4}];function c(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h1,{id:"global-function",children:"Global Function"}),"\n",(0,o.jsx)(t.h2,{id:"maptaskr-core-loaded",children:"Maptaskr Core Loaded"}),"\n",(0,o.jsx)(t.h3,{id:"windowtopmaptaskrreadypagecontext-controlid",children:"window.top.maptaskrReady(pageContext, controlId)"}),"\n",(0,o.jsx)(t.h4,{id:"description",children:"Description"}),"\n",(0,o.jsx)(t.p,{children:"To allow you to get access to, and register events with the maptaskrCORE top window variable, we have added code to execute the window.top.maptaskrReady function to let you know the map has loaded, and is ready to have events registered."}),"\n",(0,o.jsx)(t.p,{children:"This function will pass the pageContext (provided by D365) and a unique Control ID. This ID is the GUID of the maptaskr Instance, and can be used to reference future functions."}),"\n",(0,o.jsx)(t.h4,{id:"usage",children:"Usage"}),"\n",(0,o.jsx)(t.p,{children:"You will find this function pre-defined in the Custom.js file in web resources. If you wish to alter this function, please make a new Solution Layer, and upload your own Custom.js file (you can clone the existing file to extend the functionality)"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:'/* extract from custom.js */\n\nif (window && window.top)\nwindow.top.maptaskrReady = function(pageContext, controlId) {\n    console.log("Maptaskr Map ID: " + controlId + " has Loaded");\n    \n    let maptaskrControl = window && window.top && window.top.maptaskrCORE && window.top.maptaskrCORE[controlId];\n\n    if (maptaskrControl)\n    {\n        /* Use the following console logs to uniquely identify your map */\n        // console.log(pageContext);\n        // console.log(maptaskrControl.registeredLocation);\n        // console.log(maptaskrControl.webresourceLocation);\n\n        /* register the correct client validation function here */\n        maptaskrControl.clientValidationFunction = clientValidationFunction;\n\n        /* put your setup methods here */\n        /* e.g. maptaskrControl.disableSaving = true; */\n        /* this will disable the inbuilt save methods, */\n        /* you an use maptaskrControl.saveShapes() to save your own shapes.*/\n\n        /* put your event registrations here. */\n        /*  e.g. maptaskrControl.on("FeaturesSelected", ...) */\n\n    }\n};\n'})}),"\n",(0,o.jsx)(t.p,{children:"Once the map control is loaded, and the object available, you can register your events, or call the Data Accessor functions."}),"\n",(0,o.jsx)(t.p,{children:"This function also provides examples of how to use the data accessor properties from the map control to uniquely identify the form your map is loaded on. This allows you to dynamically assign the client validation function (if required) and register to select events per map."}),"\n",(0,o.jsx)(t.p,{children:"This function also provides you with access to some special accessor variables for changing the read only state of the map, providing a custom validation function for shapes on that map control, and properties to help you uniquely identify the map control should there be multiple controls on a single page."}),"\n",(0,o.jsxs)(t.table,{children:[(0,o.jsx)(t.thead,{children:(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.th,{children:"Property"}),(0,o.jsx)(t.th,{children:"Description"})]})}),(0,o.jsxs)(t.tbody,{children:[(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"maptaskrControl.registeredLocation"}),(0,o.jsx)(t.td,{children:"This variable will have the URL of the current page. This is useful for identifying which entity form you are loading the map on."})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"maptaskrControl.webresourceLocation"}),(0,o.jsx)(t.td,{children:"This variable will have the URL of the WebResource loaded within the form. This is useful if you have any custom parameters on the web resource to identify this map."})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"maptaskrControl.clientValidationFunction"}),(0,o.jsx)(t.td,{children:"This function is registered to allow you to customise the saving logic and validate the submitted shapes against custom business logic prior to saving to the Dataverse tables."})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"maptaskrControl.disableSaving"}),(0,o.jsx)(t.td,{children:"This is a Boolean value you can set to disable saving for this map control. It will not affect the UI in any way, however saving and the saving notifications will be disabled."})]})]})]})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>r});var o=n(96540);const a={},i=o.createContext(a);function s(e){const t=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),o.createElement(i.Provider,{value:t},e.children)}}}]);